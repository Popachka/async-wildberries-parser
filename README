# Wildberries Parser

Асинхронный Python-парсер для Wildberries. Позволяет собирать каталог товаров по поисковому запросу и экспортировать в XLSX.

## Особенности

- Сбор полного каталога товаров по любому поисковому запросу
- Экстракция информации о товарах:
    - Ссылка, артикул, название
    - Цена, размеры, рейтинг, отзывы
    - Описание и характеристики
    - Ссылки на изображения
    - Информация о продавце
- Асинхронная обработка деталей товаров с ограничением одновременных запросов (Semaphore)
- Генерация двух XLSX файлов:
    - Полный каталог
    - Фильтрованный каталог (рейтинг ≥ 4.5, цена ≤ 10000, страна производства Россия)

## Установка

### Клонирование репозитория

```bash
git clone <URL_репозитория>
cd <папка_с_репозиторием>
```

### Установка зависимостей

1. Установить зависимости:

```bash
pip install -r requirements.txt
```

Основные библиотеки: `httpx`, `playwright`, `pandas`, `tqdm`, `openpyxl`

2. Установить браузер для Playwright:

```bash
playwright install
```

## Использование

```bash
python wbparse_async.py
```

Скрипт соберёт товары по запросу "пальто из натуральной шерсти" и создаст два XLSX-файла:
- `wb_detailed_data.xlsx` (полный каталог)
- `filtered_catalog.xlsx` (отфильтрованные товары)

## Настройки

| Параметр | Описание | Расположение |
|----------|---------|--------------|
| Запрос | Поисковый запрос | `main()` функция, `query` параметр |
| Семафор | Количество одновременных запросов | `Semaphore(20)` в `main()` |
| Пустые страницы | Максимум пустых страниц подряд | `max_empty_pages=20` в `search_all_data()` |


### Дополнительно

    Playwright здесь только для сбора user_agent и cookies для обхода защиты. Весь последующий парсинг выполняется через httpx. 

    Цена товара берется, как цена первого размера (в наличии)


### Что еще можно сделать
1. На сборе каталога добавить ассинхронность. Сейчас товары со страниц последовательно забираются.
2. Добавить больше типизации, обработкок ошибок. И в целом потестировать код более тщательно, чтобы найти баги.
3. Можно добавить учет цен с ВБ кошельком.

